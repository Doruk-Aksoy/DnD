Actor DemonClassProtection : InfiniteProtectionBase {
	DamageFactor "Demon", 0.0
	DamageFactor "DemonPoison_EarthGolem", 0.0
	DamageFactor "DemonFire", 0.0
	DamageFactor "DemonMagic", 0.0
}

Actor ImpClassProtection : InfiniteProtectionBase {
	DamageFactor "Imp", 0.0
	DamageFactor "ImpMagic", 0.0
	DamageFactor "ImpFire", 0.0
	DamageFactor "ImpVoid", 0.0
	DamageFactor "ImpPoison_Vulgar", 0.0
	DamageFactor "ImpPoison_Roach", 0.0
}

Actor CacoClassProtection : InfiniteProtectionBase {
	DamageFactor "Caco", 0.0
	DamageFactor "CacoMagic", 0.0
	DamageFactor "CacoMagicOrange", 0.0
	DamageFactor "CacoExp", 0.0
	DamageFactor "CacoFire", 0.0
	DamageFactor "CacoPoison", 0.0
}

Actor PaineClassProtection : InfiniteProtectionBase {
	DamageFactor "Paine", 0.0
	DamageFactor "PaineExp", 0.0
	DamageFactor "PaineCurse", 0.0
	DamageFactor "PaineFire", 0.0
	DamageFactor "PainePoison", 0.0
	DamageFactor "PaineMagic", 0.0
	DamageFactor "PaineMagicFire", 0.0
}

Actor RevenantClassProtection : InfiniteProtectionBase {
	DamageFactor "Rev", 0.0
	DamageFactor "RevEnergy", 0.0
	DamageFactor "RevExp", 0.0
	DamageFactor "RevMagic", 0.0
	DamageFactor "RevSludge", 0.0
	DamageFactor "RevPoison_Crawler", 0.0
	DamageFactor "RevIce", 0.0
}

Actor HKClassProtection : InfiniteProtectionBase {
	DamageFactor "Barons", 0.0
	DamageFactor "BaronsExp", 0.0
	DamageFactor "BaronsPoison", 0.0
	DamageFactor "BaronsFire", 0.0
	DamageFactor "BaronGreen", 0.0
	DamageFactor "BaronGreenFire", 0.0
	DamageFactor "BaronPlasma", 0.0
	DamageFactor "BaronVoid", 0.0
	DamageFactor "BaronYellow", 0.0
	DamageFactor "BaronsMagic", 0.0
	DamageFactor "BaronsMagicFire", 0.0
}

Actor FatsoClassProtection : InfiniteProtectionBase {
	DamageFactor "Fatty", 0.0
	DamageFactor "FattyPlasma", 0.0
	DamageFactor "FattyExp", 0.0
	DamageFactor "FattyBullet", 0.0
	DamageFactor "FattyFire", 0.0
	DamageFactor "FattyIce", 0.0
	DamageFactor "FatsoCorrupt", 0.0
	DamageFactor "FattyVoidFire", 0.0
	DamageFactor "FattyMagic", 0.0
}

Actor ArachnoClassProtection : InfiniteProtectionBase {
	DamageFactor "Arachno", 0.0
	DamageFactor "ArachnoExp", 0.0
	DamageFactor "ArachnoBullet", 0.0
	DamageFactor "ArachnoFire", 0.0
	DamageFactor "ArachnoVoid", 0.0
	DamageFactor "ArachnoGreen", 0.0
	DamageFactor "ArachnoYellow", 0.0
}

Actor VileClassProtection : InfiniteProtectionBase {
	DamageFactor "Vile", 0.0
	DamageFactor "VileBullet", 0.0
	DamageFactor "VilePacify", 0.0
	DamageFactor "VileStun", 0.0
	DamageFactor "VileGhost", 0.0
	DamageFactor "VileFire", 0.0
	DamageFactor "VileCurse", 0.0
	DamageFactor "VileBlue", 0.0
	DamageFactor "VileBlueFire", 0.0
	DamageFactor "VileSlow", 0.0
	DamageFactor "VileSnare", 0.0
	DamageFactor "VileMagic", 0.0
}

Actor SMClassProtection : InfiniteProtectionBase {
	DamageFactor "BigSpider", 0
	DamageFactor "BigSpiderExp", 0
	DamageFactor "BigSpiderBullet", 0
	DamageFactor "BigSpiderFire", 0
	DamageFactor "BigSpiderGreen", 0
	DamageFactor "BigSpiderVoid", 0
	DamageFactor "BigSpiderTornado", 0
	DamageFactor "BigSpiderPercent", 0
	DamageFactor "BigSpiderIce", 0
	DamageFactor "BigSpiderYellow", 0
	DamageFactor "BigSpiderDark", 0
	DamageFactor "VisionDimmer", 0
}

Actor CyberClassProtection : InfiniteProtectionBase {
	DamageFactor "Cyber", 0.0
	DamageFactor "CyberEnergy", 0.0
	DamageFactor "CyberExp", 0.0
	DamageFactor "CyberBullet", 0.0
	DamageFactor "CyberFire", 0.0
	DamageFactor "CyberLightning", 0.0
	DamageFactor "CyberIce", 0.0
	DamageFactor "CyberSlow", 0.0
	DamageFactor "CyberGreen", 0.0
	DamageFactor "CyberGreenExp", 0.0
	DamageFactor "CyberOrangeMagic", 0.0
}

Actor MakeExplosiveHighResist : DnD_Activator {
	States {
		Pickup:
			TNT1 A 0 A_ChangeFlag("NORADIUSDMG", 1)
		Stop
	}
}

Actor MakeHardenedSkin : DnD_Activator {
	States {
		Pickup:
			TNT1 A 0 A_ChangeFlag("DONTRIP", 1)
		Stop
	}
}

Actor MakeGhost : DnD_Activator {
	States {
		Pickup:
			TNT1 A 0 A_ChangeFlag("GHOST", 1)
		Stop
	}
}

Actor MakeReflective : DnD_Activator {
	States {
		Pickup:
			TNT1 A 0 A_ChangeFlag("REFLECTIVE", 1)
		Stop
	}
}

Actor MakeAggressive : DnD_Activator {
	States {
		Pickup:
			TNT1 A 0 A_ChangeFlag("MISSILEMORE", 1)
			TNT1 A 0 A_ChangeFlag("MISSILEEVENMORE", 1)
			TNT1 A 0 A_ChangeFlag("NOFEAR", 1)
		Stop
	}
}

Actor MakeFaster : DnD_Activator {
	States {
		Pickup:
			TNT1 A 0 A_ChangeFlag("ALWAYSFAST", 1)
		Stop
	}
}

Actor MakeRetaliate : DnD_Activator {
	States {
		Pickup:
			TNT1 A 0 A_ChangeFlag("QUICKTORETALIATE", 1)
		Stop
	}
}

Actor MakePierce : DnD_Activator {
	States {
		Pickup:
			TNT1 A 0 A_ChangeFlag("PIERCEARMOR", 1)
		Stop
	}
}

Actor MakeNoPain : DnD_Activator {
	States {
		Pickup:
			TNT1 A 0 A_ChangeFlag("NOPAIN", 1)
		Stop
	}
}

Actor TakeNoPain : DnD_Activator {
	States {
		Pickup:
			TNT1 A 0 A_ChangeFlag("NOPAIN", 0)
		Stop
	}
}

Actor MakePhysicalResist : DnD_Activator {
	States {
		Pickup:
			TNT1 A 0 A_ChangeFlag("NOBLOOD", 1)
		Stop
	}
}

Actor MakeReflectiveInvulnerable : DnD_Activator {
	States {
		Pickup:
			TNT1 A 0 ACS_NamedExecuteWithResult("DnD Monster Trait Give", 0, DND_ISBLOCKING)
			TNT1 A 0 A_SetReflective
		Stop
	}
}

Actor TakeReflectiveInvulnerable : DnD_Activator {
	States {
		Pickup:
			TNT1 A 0 ACS_NamedExecuteWithResult("DnD Monster Trait Take", 0, DND_ISBLOCKING)
			TNT1 A 0 A_UnSetReflective
		Stop
	}
}

Actor DnD_RebirthItem : DnD_Activator {
	States {
		Pickup:
			TNT1 AAAAA 0 A_SpawnItemEx("ReiverGhost_NoExp_NoSolid", 8, 0, height / 2, 0, 0, 0, 0, SXF_NOCHECKPOSITION | SXF_SETMASTER)
		Stop
	}
}

Actor ViolentRetaliation_Proj {
	Radius 6
	Height 12
	Damage (5 * random(4, 5) * (1.0 + ACS_NamedExecuteWithResult("DND Monster Damage Scale", DND_USETARGET)))
	Scale 0.65
	Gravity 0.33
	Projectile
	DeathSound "Mafibus/Hit"
	Decal Scorch
	damagetype "FattyFire"
	+DONTBLAST
	-NOGRAVITY
	States {
		Spawn:
			TNT1 A 0 NoDelay ACS_NamedExecuteAlways("DnD Pierce Check")
		SpawnLoop:
			MFBL A 0 A_PlaySoundEx("Mafibus/Loop", "SoundSlot7", 1, -1)
			MFBL AAAABBBBCCCC 1 Bright A_SpawnItemEx("MafibusBallTrail", 0, 0, 0, 0, 0, 0, 0, 128)
		Loop
		Death:
			TNT1 A 0 A_SpawnItemEx("OrangeParticleSpawner", 0, 0, 0, 0, 0, 0, 0, 128)
			TNT1 AAAA 0 A_CustomMissile("ExplosionFX2", 0, 0, random(0,360), 2, random(0,360))
			TNT1 AAAAAA 0 A_CustomMissile("FireballSmoke", 0, 0, random(0,360), 2, random(0,360))
			MFBL A 0 A_StopSoundEx("SoundSlot7")
			TNT1 A 0 A_Explode(64 * (1.0 + ACS_NamedExecuteWithResult("DND Monster Damage Scale", DND_USETARGET)), 96, 0)
			MFBL DE 4 Bright
			MFBL F 4 Bright A_SetTranslucent(0.7, 1)
			MFBL G 4 Bright A_SetTranslucent(0.4, 1)
			MFBL HI 4 Bright
		Stop
	}
}

Actor DnD_ViolentRetaliationItem : DnD_Activator {
	States {
		Pickup:
			TNT1 A 0 A_ThrowGrenade("ViolentRetaliation_Proj", frandom(-15, -8 + height / 2), random(-13, 13),frandom(2, 9),0)
		Stop
	}
}